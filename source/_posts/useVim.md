---
title:  Vim 基础使用
date: 2018-03-03 17:08:12
categories: Linux
tags:
 - Vim
 - Linux
---
虽然现在linux有比较多的图形界面系统，但是在功能上还是不如命令行强大，很多需要管理员权限的动作都不能在图形界面下使用.
** Vim 是什么？**
- Vim 是从 vi 发展出来的一个高效率的文本编辑器，在程序员中被广泛使用，有很多支持程序员们更快更好写代码的强大功能。
<!--more-->

** 为什么要学习使用 Vim？**
-   作为一个程序员，不管是前端还是后端，工作中基本上都要跟服务器打交道，而现在服务器里面运行的操作系统基本上都是 Linux。
-   当你远程跟服务器通信的时候，基本上都要通过终端来跟服务器建立连接。
-   当你要修改服务器的某个配置文件的时候，在一个黑漆漆的终端里，你能用的几乎只有 Vim。不会使用 Vim，就没办法工作。

** 如何学习使用 Vim？**
-   学习任何东西都要循序渐进，不要想一口吃成个胖子。现在很多教程上来就列一堆快捷键，基本上看几眼就放弃了。
-   刚开始只需要学习一些最基本的操作，后面随着代码写的越来越多，进阶的操作每次练一两个，慢慢也就会了，很简单。
-   工具是拿来用的，不要让它成为一个负担！

** 新手最大的问题**
-   大小写看错
-   空格写漏
-  把多个命令当成一个命令

## 基础使用

### 1. Vim 的两种模式：编辑模式&命令模式
- 输入`vim a.md` 初始进入编辑器命令模式（注意 `vim` 和 `a.txt` 之间有一个空格）
-   `i` 进入编辑模式
-   键盘左上角 `esc` 进入命令模式
-   `:wq` 保存退出
-   `:q!` 不保存强制退出


### 2. 常见的文本操作

#### 一、 打开文件、保存、关闭文件(vi命令模式下使用)
```
:w       //保存文件
:w vpser.net //保存至vpser.net文件
:q          //退出编辑器，如果文件已修改请使用下面的命令
:q!        //退出编辑器，且不保存
:wq         //退出编辑器，且保存文件
```

#### 二、 插入文本或行(vi命令模式下使用，执行下面命令后将进入插入模式，按ESC键可退出插入模式)

一般使用i
```
a     //在当前光标位置的右边添加文本
i     //在当前光标位置的左边添加文本
A     //在当前行的末尾位置添加文本
I     //在当前行的开始处添加文本(非空字符的行首)
O     //在当前行的上面新建一行
o     //在当前行的下面新建一行
R     //替换(覆盖)当前光标位置及后面的若干文本
J     //合并光标所在行及下一行为一行(依然在命令模式)
```
#### 三、  移动光标(vi命令模式下使用)

1、使用上下左右方向键

2、命令模式下：h   向左、j   向下 、k   向上、l  向右。
空格键 向右、Backspace  向左、Enter  移动到下一行首、-  移动到上一行首。

#### 四、 删除、恢复字符或行(vi命令模式下使用)
```
x      //删除当前字符
nx     //删除从光标开始的n个字符
dd     //删除当前行
ndd    //向下删除当前行在内的n行
u      //撤销上一步操作
U      //撤销对当前行的所有操作
```
#### 五、 搜索(vi命令模式下使用)
```
/vpser    //向光标下搜索vpser字符串，vpser可以是正则表达式
?vpser    //向光标上搜索vpser字符串
n         //向下搜索前一个搜素动作
N         //向上搜索前一个搜索动作
*(#)      //当光标停留在某个单词上时, 输入这条命令表示查找与该单词匹配的下(上)一个单词. 同样, 再输入 n 查找下一个匹配处, 输入 N 反方向查找.

g*(g#)    //此命令与上条命令相似, 只不过它不完全匹配光标所在处的单词, 而是匹配包含该单词的所有字符串.
```
####  六、 跳至指定行(vi命令模式下使用)
```
n+        //向下跳n行
n-        //向上跳n行
nG        //跳到行号为n的行
G         //跳至文件的底部
```
#### 七、 设置行号(vi命令模式下使用)
```
:set  nu     //显示行号
:set nonu    //取消显示行号
```
#### 八、 复制、粘贴(vi命令模式下使用)
```
yy    //将当前行复制到缓存区，也可以用 "ayy 复制，"a 为缓冲区，a也可以替换为a到z的任意字母，可以完成多个复制任务。
nyy   //将当前行向下n行复制到缓冲区，也可以用 "anyy 复制，"a 为缓冲区，a也可以替换为a到z的任意字母，可以完成多个复制任务。
yw    //复制从光标开始到词尾的字符。
nyw   //复制从光标开始的n个单词。
y^    //复制从光标到行首的内容。  [VPS侦探](http://www.vpser.net/)
y$    //复制从光标到行尾的内容。
p     //粘贴剪切板里的内容在光标后，如果使用了前面的自定义缓冲区，建议使用"ap 进行粘贴。
P     //粘贴剪切板里的内容在光标前，如果使用了前面的自定义缓冲区，建议使用"aP 进行粘贴。
```
#### 九、 替换(vi命令模式下使用)
```
:s/old/new           //用new替换行中首次出现的old
:s/old/new/g         //用new替换行中所有的old
:n,m s/old/new/g     //用new替换从n到m行里所有的old
:%s/old/new/g        //用new替换当前文件里所有的old
```
#### 十、 编辑其他文件
```
:e otherfilename    //编辑文件名为otherfilename的文件。
```
#### 十一、修改文件格式
```
:set fileformat=unix   //将文件修改为unix格式，如win下面的文本文件在linux下会出现^M。
```
#### 十二、查找帮助

当你不知道怎么处理时，直接输入help可以看到帮助文档的起点，ZZ是退出或者：q，不建议使用查找关于某个字母的命令 ：help x   查找关于x的命令。



-----
| 按键 | 功能 |
| --- | --- |
| h或← | 光标左移 |
| l或→ | 光标右移 |
| k或↑ | 光标上移 |
| j或↓ | 光标下移 |
| gg | 快速定位到文本开头 |
| G（shift+g） | 快速定位到文本最后一段 |
| 0或home | 快速定位到当前段首 |
| $或end | 快速定位到当前段首 |
| Ctrl+f | 向下翻一页 |
| Ctrl+b | 向上翻一页 |
| Ctrl+d | 向下翻半页 |
| Ctrl+u | 向上翻一页 |
| /string | 查找文本中光标位置下方的string字符串，如要查找kabc则直接输入/kabc即可 |
| ?string | 查找文本中光标位置上方的string字符串，如要查找kabc则直接输入?kabc即可 |
| yy | 复制光标所在的段落 |
| y0 | 复制光标位置到段首的所有字符 |
| y$ | 复制光标位置到段尾的所有字符 |
| nyy | 从光标位置向下复制n段，包含光标所在的段落 |
| ygg | 复制光标位置所在段落到文本开头的所有内容 |
| yG | 复制光标位置所在段落到文本结尾的所有内容 |
| p | 将复制的内容粘贴为光标所在段落的下一段 |
| P | 将复制的内容粘贴为光标所在段落的上一段 |
| dd | 删除光标所在的段落 |
| d0 | 删除光标位置到段首的所有字符 |
| d$ | 删除光标位置到段尾的所有字符 |
| dgg | 删除光标位置所在段落到文本开头的所有内容 |
| dG | 删除光标位置所在段落到文本结尾的所有内容 |
| ndd | 从光标位置向下删除n段，包含光标所在的段落 |
| u | 撤销上一个操作 |
| Ctrl+r | 重复上一个操作 |
| :w | 保存数据 |
| :w! | 保存时强制写入数据，不管文件是否为只读文件 |
| ) | 移至下一个句子（sentence）首 （sentence 是以 . ! ? 为区格） |
| ( | 移至上一个句子（sentence）首 |
| } | 移至下一个段落（paragraph）首 （paragraph 是以空白行为区格） |
| { | 移至上一个段落（paragraph）首 |
